# Stock Inventory UI Implementation - January 11, 2026

## Обзор выполненных работ

В ходе сегодняшней работы была реализована полноценная функциональность просмотра остатков товаров и истории перемещений паллет в JavaFX Desktop Client приложении WMSDIPL.

## Выполненные задачи

### 1. Создание Model классов для Desktop Client ✅

#### StockItem.java
**Местоположение**: `desktop-client/src/main/java/com/wmsdipl/desktop/model/StockItem.java`

**Описание**: Record класс для представления единицы остатка на складе.

**Поля** (17 полей):
- `Long palletId` - ID паллеты
- `String palletCode` - код паллеты
- `String skuCode` - код SKU
- `String skuName` - наименование товара
- `Integer quantity` - количество
- `String uom` - единица измерения
- `String locationCode` - код ячейки хранения
- `String status` - статус паллеты (EMPTY, RECEIVED, PLACED, PICKED)
- `Long receiptId` - ID прихода
- `String receiptDocNo` - номер документа прихода
- `String lotNumber` - номер партии
- `String expiryDate` - срок годности (ISO date string)
- `String supplierCode` - код поставщика
- `String supplierName` - наименование поставщика
- `String receivedAt` - дата получения (ISO datetime string)
- `String placedAt` - дата размещения (ISO datetime string)
- `String lastMovedAt` - дата последнего перемещения (ISO datetime string)

#### StockMovement.java
**Местоположение**: `desktop-client/src/main/java/com/wmsdipl/desktop/model/StockMovement.java`

**Описание**: Record класс для представления записи о перемещении паллеты.

**Поля** (13 полей):
- `Long id` - ID записи перемещения
- `String movementType` - тип перемещения (RECEIVE, PLACE, PICK, MOVE, ADJUST)
- `Long palletId` - ID паллеты
- `String palletCode` - код паллеты
- `String fromLocationCode` - код исходной ячейки
- `String toLocationCode` - код целевой ячейки
- `String skuCode` - код SKU
- `Integer quantity` - количество
- `Long taskId` - ID задания
- `String movedBy` - кто выполнил перемещение (username)
- `String movedAt` - дата/время перемещения (ISO datetime string)
- `String notes` - примечания
- `String createdAt` - дата создания записи (ISO datetime string)

### 2. Расширение ApiClient для работы с Stock API ✅

**Местоположение**: `desktop-client/src/main/java/com/wmsdipl/desktop/ApiClient.java`

#### Добавленные методы (строки ~534-630):

**1. listStock()** - Получение списка остатков с фильтрацией и пагинацией
```java
public StockPage listStock(
    String skuCode,         // фильтр по коду SKU
    String locationCode,    // фильтр по коду ячейки
    String palletBarcode,   // фильтр по баркоду паллеты
    Long receiptId,         // фильтр по ID прихода
    String status,          // фильтр по статусу (EMPTY, RECEIVED, PLACED, PICKED)
    int page,               // номер страницы (0-based)
    int size                // размер страницы
)
```
**Endpoint**: `GET /api/stock`

**2. getStockItem()** - Получение информации об остатке для конкретной паллеты
```java
public StockItem getStockItem(Long palletId)
```
**Endpoint**: `GET /api/stock/pallet/{id}`

**3. getPalletHistory()** - Получение истории перемещений паллеты
```java
public List<StockMovement> getPalletHistory(Long palletId)
```
**Endpoint**: `GET /api/stock/pallet/{id}/history`

**4. getStockByLocation()** - Получение остатков в конкретной ячейке
```java
public StockPage getStockByLocation(
    Long locationId,
    int page,
    int size
)
```
**Endpoint**: `GET /api/stock/location/{id}`

#### Добавленный вспомогательный класс StockPage
```java
public static class StockPage {
    public List<StockItem> content;      // список элементов на странице
    public int totalPages;               // общее количество страниц
    public long totalElements;           // общее количество элементов
    public int number;                   // номер текущей страницы
    public int size;                     // размер страницы
}
```

### 3. Реализация UI для просмотра остатков ✅

**Местоположение**: `desktop-client/src/main/java/com/wmsdipl/desktop/DesktopClientApplication.java`

#### 3.1. Добавлена кнопка навигации "Остатки"
**Метод**: `buildNav()` (строка ~110)

Кнопка размещена между "Паллеты" и "Задания" в левой навигационной панели.

#### 3.2. Реализован метод showStockPane() (~250 строк кода)
**Расположение**: строка ~525

**Компоненты пользовательского интерфейса**:

##### Панель фильтров
1. **Код SKU** (TextField) - поиск по коду товара
2. **Код ячейки** (TextField) - поиск по коду места хранения
3. **Баркод паллеты** (TextField) - поиск по штрих-коду паллеты
4. **ID прихода** (TextField) - фильтрация по номеру прихода
5. **Статус** (ComboBox) - выбор статуса:
   - Пусто (все статусы)
   - EMPTY (пустая паллета)
   - RECEIVED (получена)
   - PLACED (размещена)
   - PICKED (отобрана)

**Кнопки**:
- **"Поиск"** - выполнить поиск с текущими фильтрами
- **"Очистить"** - сбросить все фильтры

**Функциональность**:
- Поддержка Enter в любом поле фильтра для запуска поиска
- Асинхронная загрузка данных (не блокирует UI)
- Обработка ошибок с выводом диалогов

##### Таблица остатков (11 колонок)
| № | Колонка | Поле | Описание |
|---|---------|------|----------|
| 1 | ID | palletId | Идентификатор паллеты |
| 2 | Паллета | palletCode | Код паллеты |
| 3 | SKU | skuCode | Код товара |
| 4 | Название | skuName | Наименование товара |
| 5 | Кол-во | quantity | Количество единиц |
| 6 | Ед.изм | uom | Единица измерения |
| 7 | Ячейка | locationCode | Код ячейки хранения |
| 8 | Статус | status | Текущий статус паллеты |
| 9 | Приход | receiptDocNo | Номер документа прихода |
| 10 | Партия | lotNumber | Номер партии товара |
| 11 | Срок годн. | expiryDate | Срок годности |

**Функциональность таблицы**:
- Двойной клик по строке открывает диалог истории перемещений
- Автоматическая подстройка ширины колонок
- Стилизация в соответствии с темным дизайном приложения

##### Панель пагинации
**Элементы управления**:
- **"◀ Пред"** - переход на предыдущую страницу
- **"Страница: X / Y"** - индикатор текущей страницы
- **"Всего: N"** - общее количество элементов
- **"След ▶"** - переход на следующую страницу

**Параметры**:
- Размер страницы: 50 элементов
- Кнопки автоматически блокируются на первой/последней странице

#### 3.3. Реализован метод showMovementHistoryDialog() (~100 строк кода)
**Расположение**: строка ~775

**Описание**: Модальное диалоговое окно для просмотра истории перемещений конкретной паллеты.

**Заголовок**: "История перемещений паллеты: {palletCode}"

**Таблица истории (8 колонок)**:
| № | Колонка | Поле | Описание |
|---|---------|------|----------|
| 1 | ID | id | Идентификатор записи |
| 2 | Тип | movementType | Тип операции (RECEIVE, PLACE, PICK, MOVE, ADJUST) |
| 3 | Откуда | fromLocationCode | Исходная ячейка |
| 4 | Куда | toLocationCode | Целевая ячейка |
| 5 | Кол-во | quantity | Количество единиц |
| 6 | Кем | movedBy | Логин пользователя |
| 7 | Когда | movedAt | Дата и время перемещения |
| 8 | Задание | taskId | ID связанного задания |

**Функциональность**:
- Асинхронная загрузка истории из API
- Кнопка "Закрыть" для закрытия диалога
- Обработка ошибок загрузки
- Стилизация в соответствии с темным дизайном

### 4. Backend тестирование ✅

**Местоположение**: `core-api/src/test/java/com/wmsdipl/core/web/StockControllerTest.java`

**Статус**: Все тесты проходят успешно

**Покрытие** (10 тестов):
1. `testListStock_ShouldReturnPagedResults` - базовая пагинация
2. `testListStock_WithSkuFilter_ShouldFilterBySku` - фильтрация по SKU
3. `testListStock_WithLocationFilter_ShouldFilterByLocation` - фильтрация по ячейке
4. `testListStock_WithStatusFilter_ShouldFilterByStatus` - фильтрация по статусу
5. `testListStock_WithPalletBarcodeFilter_ShouldFilterByBarcode` - поиск по баркоду
6. `testListStock_WithReceiptFilter_ShouldFilterByReceipt` - фильтрация по приходу
7. `testGetStockItem_WhenPalletExists_ShouldReturnItem` - получение элемента
8. `testGetStockItem_WhenPalletNotFound_ShouldReturn404` - обработка 404
9. `testGetPalletHistory_ShouldReturnMovements` - история перемещений
10. `testGetStockByLocation_ShouldReturnPagedResults` - остатки по ячейке

**Результат**: 296 тестов проходят успешно в core-api модуле

## Технические детали реализации

### Архитектурные решения

#### Асинхронная загрузка данных
Все запросы к API выполняются асинхронно через `CompletableFuture`:
```java
CompletableFuture.supplyAsync(() -> {
    return apiClient.listStock(...);
}).whenComplete((result, error) -> {
    Platform.runLater(() -> {
        if (error != null) {
            // Обработка ошибки
        } else {
            // Обновление UI
        }
    });
});
```

**Преимущества**:
- UI не блокируется во время загрузки
- Пользователь видит индикацию процесса
- Корректная обработка ошибок

#### Паттерн Record для моделей
Использование Java Records обеспечивает:
- Неизменяемость данных (immutability)
- Автоматическую генерацию equals/hashCode/toString
- Компактный синтаксис
- Совместимость с Jackson для десериализации

#### CSS стилизация
Все компоненты используют существующие CSS классы:
- `dark-input` - поля ввода
- `dark-button` - кнопки
- `dark-table` - таблицы
- `dark-combo` - выпадающие списки
- `dark-label` - метки

### REST API эндпоинты

| HTTP Method | Endpoint | Параметры | Возвращает |
|-------------|----------|-----------|------------|
| GET | `/api/stock` | skuCode, locationCode, palletBarcode, receiptId, status, page, size | Page\<StockItemDto\> |
| GET | `/api/stock/pallet/{id}` | palletId (path) | StockItemDto |
| GET | `/api/stock/pallet/{id}/history` | palletId (path) | List\<StockMovementDto\> |
| GET | `/api/stock/location/{id}` | locationId (path), page, size | Page\<StockItemDto\> |

### Обработка ошибок

#### В ApiClient
- IOException → Alert с сообщением об ошибке сети
- HTTP 404 → null возврат для getStockItem
- HTTP 4xx/5xx → Alert с сообщением о серверной ошибке

#### В UI
- Пустой результат → показывается пустая таблица
- Ошибка загрузки → Alert диалог с деталями ошибки
- Отсутствие истории → пустая таблица в диалоге

## Инструкция для тестирования

### Предварительные требования

1. **PostgreSQL база данных** должна быть запущена:
   ```bash
   docker compose up -d postgres
   ```

2. **Core API сервер** должен быть запущен:
   ```bash
   gradle :core-api:bootRun
   # Ожидать: "Started CoreApiApplication in X seconds"
   # Порт: 8080
   ```

3. **Наличие тестовых данных** в базе:
   - SKU (товары)
   - Receipts (приходы)
   - Pallets (паллеты)
   - Scans (сканирования)
   - Movements (перемещения)

### Запуск Desktop Client

**Вариант 1**: Через Gradle
```bash
gradle :desktop-client:run
```

**Вариант 2**: Через bat-файл (если существует)
```bash
start-desktop-client.bat
```

**Вариант 3**: Через собранный JAR
```bash
java -jar desktop-client/build/libs/desktop-client-0.0.1-SNAPSHOT.jar
```

### Тестовый сценарий 1: Вход в систему

1. Запустите Desktop Client
2. Введите логин и пароль тестового пользователя
   - **Логин**: `testuser` (или созданный ранее)
   - **Пароль**: `password`
3. Нажмите кнопку "Войти"
4. **Ожидаемый результат**: Успешный вход, отображение главного экрана

### Тестовый сценарий 2: Открытие раздела "Остатки"

1. После успешного входа найдите в левой навигационной панели кнопку **"Остатки"**
2. Кнопка должна быть расположена между кнопками "Паллеты" и "Задания"
3. Нажмите на кнопку "Остатки"
4. **Ожидаемый результат**: 
   - Кнопка "Остатки" подсвечивается
   - В центральной части экрана отображается:
     - Панель фильтров с 5 полями и 2 кнопками
     - Пустая таблица с 11 колонками
     - Панель пагинации внизу

### Тестовый сценарий 3: Загрузка всех остатков

1. В разделе "Остатки" оставьте все фильтры пустыми
2. Нажмите кнопку **"Поиск"**
3. **Ожидаемый результат**:
   - Таблица заполняется данными (если есть остатки в БД)
   - Пагинация показывает: "Страница: 1 / X" и "Всего: N"
   - Если остатков нет: таблица остается пустой

### Тестовый сценарий 4: Фильтрация по коду SKU

**Подготовка**: Узнайте код существующего SKU из базы (например, "SKU-001")

1. В поле **"Код SKU"** введите код товара (например: `SKU-001`)
2. Нажмите кнопку **"Поиск"** или нажмите **Enter**
3. **Ожидаемый результат**:
   - В таблице отображаются только паллеты с указанным SKU
   - Колонка "SKU" содержит введенный код

### Тестовый сценарий 5: Фильтрация по коду ячейки

**Подготовка**: Узнайте код существующей ячейки (например, "A-01-01")

1. Очистите предыдущие фильтры кнопкой **"Очистить"**
2. В поле **"Код ячейки"** введите код ячейки (например: `A-01-01`)
3. Нажмите кнопку **"Поиск"**
4. **Ожидаемый результат**:
   - В таблице отображаются только паллеты из указанной ячейки
   - Колонка "Ячейка" содержит введенный код

### Тестовый сценарий 6: Фильтрация по статусу

1. Очистите предыдущие фильтры
2. В выпадающем списке **"Статус"** выберите **"PLACED"**
3. Нажмите кнопку **"Поиск"**
4. **Ожидаемый результат**:
   - В таблице отображаются только паллеты со статусом PLACED
   - Колонка "Статус" содержит значение "PLACED"

### Тестовый сценарий 7: Фильтрация по ID прихода

**Подготовка**: Узнайте ID существующего прихода (например, 1)

1. Очистите предыдущие фильтры
2. В поле **"ID прихода"** введите числовой ID (например: `1`)
3. Нажмите кнопку **"Поиск"**
4. **Ожидаемый результат**:
   - В таблице отображаются только паллеты из указанного прихода
   - Колонка "Приход" может содержать соответствующий номер документа

### Тестовый сценарий 8: Комбинированная фильтрация

1. Очистите предыдущие фильтры
2. Заполните несколько полей одновременно:
   - Код SKU: `SKU-001`
   - Статус: `PLACED`
3. Нажмите кнопку **"Поиск"**
4. **Ожидаемый результат**:
   - В таблице отображаются только паллеты, удовлетворяющие ВСЕМ условиям
   - (SKU = SKU-001 И Статус = PLACED)

### Тестовый сценарий 9: Очистка фильтров

1. Заполните несколько полей фильтров произвольными значениями
2. Нажмите кнопку **"Очистить"**
3. **Ожидаемый результат**:
   - Все текстовые поля очищаются
   - Выпадающий список статуса сбрасывается на пустое значение
   - Таблица не перезагружается автоматически (остается в прежнем состоянии)

### Тестовый сценарий 10: Пагинация (если больше 50 элементов)

**Предварительное условие**: В БД должно быть больше 50 паллет

1. Загрузите все остатки (поиск без фильтров)
2. Проверьте панель пагинации:
   - Должно быть: "Страница: 1 / N" (где N > 1)
   - Кнопка "◀ Пред" должна быть неактивна
   - Кнопка "След ▶" должна быть активна
3. Нажмите кнопку **"След ▶"**
4. **Ожидаемый результат**:
   - Загружается страница 2
   - Индикатор показывает: "Страница: 2 / N"
   - Кнопка "◀ Пред" становится активной
   - Таблица заполняется новыми данными (элементы 51-100)
5. Нажмите кнопку **"◀ Пред"**
6. **Ожидаемый результат**:
   - Возврат на страницу 1
   - Индикатор: "Страница: 1 / N"
   - Кнопка "◀ Пред" снова неактивна

### Тестовый сценарий 11: Просмотр истории перемещений

**Предварительное условие**: Выбранная паллета должна иметь хотя бы одно перемещение

1. Загрузите любые остатки
2. **Дважды кликните** по любой строке в таблице
3. **Ожидаемый результат**:
   - Открывается модальное диалоговое окно
   - Заголовок: "История перемещений паллеты: {код паллеты}"
   - Отображается таблица с колонками: ID, Тип, Откуда, Куда, Кол-во, Кем, Когда, Задание
   - Если есть перемещения: таблица заполнена данными
   - Если перемещений нет: таблица пустая
   - Внизу есть кнопка "Закрыть"

### Тестовый сценарий 12: Закрытие диалога истории

1. Откройте диалог истории перемещений (двойной клик по строке)
2. Нажмите кнопку **"Закрыть"**
3. **Ожидаемый результат**:
   - Диалог закрывается
   - Возврат к основной таблице остатков

### Тестовый сценарий 13: Поиск по Enter

1. Введите значение в любое поле фильтра (например, код SKU)
2. Не нажимая кнопку "Поиск", нажмите **Enter** на клавиатуре
3. **Ожидаемый результат**:
   - Поиск выполняется автоматически
   - Таблица обновляется с учетом фильтра

### Тестовый сценарий 14: Обработка ошибок

#### 14.1. Отсутствие соединения с API
1. Остановите core-api сервер
2. В Desktop Client попробуйте выполнить поиск
3. **Ожидаемый результат**:
   - Появляется Alert диалог с сообщением об ошибке
   - Таблица остается в прежнем состоянии

#### 14.2. Неверный формат ID прихода
1. В поле "ID прихода" введите текст (например: `abc`)
2. Нажмите "Поиск"
3. **Ожидаемый результат**:
   - Поле игнорируется или появляется ошибка валидации
   - (В текущей реализации поле может быть проигнорировано)

### Тестовый сценарий 15: Проверка типов перемещений в истории

**Подготовка**: Создайте паллету с разными типами перемещений:
- RECEIVE (получение)
- PLACE (размещение)
- PICK (отбор)
- MOVE (перемещение)

1. Найдите эту паллету в таблице остатков
2. Дважды кликните для открытия истории
3. **Ожидаемый результат**:
   - Каждый тип перемещения отображается в колонке "Тип"
   - Для RECEIVE: "Откуда" пусто, "Куда" заполнено
   - Для PLACE: обе колонки заполнены
   - Для PICK: "Откуда" заполнено, "Куда" может быть пусто
   - Колонка "Кем" содержит логин пользователя
   - Колонка "Когда" содержит дату и время

## Создание тестовых данных

Если в системе нет данных для тестирования, используйте Swagger UI для создания:

### Доступ к Swagger UI
URL: `http://localhost:8080/swagger-ui.html`

### Шаг 1: Создать SKU
**Endpoint**: `POST /api/skus`

**Request Body**:
```json
{
  "code": "SKU-TEST-001",
  "name": "Тестовый товар 1",
  "uom": "ШТ"
}
```

### Шаг 2: Создать приход
**Endpoint**: `POST /api/receipts`

**Request Body**:
```json
{
  "docNo": "RCP-TEST-001",
  "supplier": "Тестовый поставщик",
  "expectedDate": "2026-01-15"
}
```

**Запомните** ID созданного прихода (например, `1`)

### Шаг 3: Подтвердить приход
**Endpoint**: `POST /api/receipts/{id}/confirm`

**Path Parameter**: ID из шага 2 (например, `1`)

### Шаг 4: Начать приемку
**Endpoint**: `POST /api/receipts/{id}/start-receiving`

**Path Parameter**: ID прихода

### Шаг 5: Создать паллету
**Endpoint**: `POST /api/pallets`

**Request Body**:
```json
{
  "code": "PLT-TEST-001"
}
```

**Запомните** ID паллеты (например, `1`)

### Шаг 6: Получить ID задачи приемки
**Endpoint**: `GET /api/tasks?status=IN_PROGRESS&type=RECEIVING`

**Запомните** ID задачи из ответа (например, `1`)

### Шаг 7: Записать сканирование
**Endpoint**: `POST /api/tasks/{taskId}/scans`

**Path Parameter**: ID задачи из шага 6

**Request Body**:
```json
{
  "palletCode": "PLT-TEST-001",
  "barcode": "SKU-TEST-001",
  "qty": 100,
  "lotNumber": "LOT-2026-001",
  "expiryDate": "2027-01-15"
}
```

### Шаг 8: Завершить приемку
**Endpoint**: `POST /api/tasks/{taskId}/complete`

**Path Parameter**: ID задачи

### Шаг 9: Создать задачу размещения
**Endpoint**: `POST /api/placements`

**Request Body**:
```json
{
  "palletId": 1,
  "targetLocationId": 1
}
```

### Шаг 10: Проверить историю перемещений
**Endpoint**: `GET /api/stock/pallet/{id}/history`

**Path Parameter**: ID паллеты (например, `1`)

**Ожидаемый ответ**:
```json
[
  {
    "id": 1,
    "movementType": "RECEIVE",
    "palletId": 1,
    "palletCode": "PLT-TEST-001",
    "fromLocationCode": null,
    "toLocationCode": "RECEIVING-ZONE",
    "skuCode": "SKU-TEST-001",
    "quantity": 100,
    "taskId": 1,
    "movedBy": "testuser",
    "movedAt": "2026-01-11T...",
    ...
  }
]
```

## Известные ограничения и будущие улучшения

### Текущие ограничения
1. **Нет экспорта в CSV** - невозможно выгрузить таблицу остатков в файл
2. **Нет сортировки колонок** - клик по заголовку не сортирует данные
3. **Фиксированный размер страницы** (50 элементов) - нельзя настроить
4. **Нет автообновления** - требуется ручное обновление данных
5. **Текстовые даты** - даты отображаются как ISO строки, не локализованы
6. **Нет поиска "на дату"** - невозможно посмотреть остатки на прошлую дату
7. **Валидация Receipt ID** - некорректный ввод может вызвать ошибку

### Планируемые улучшения
1. **Экспорт в CSV/Excel** - кнопка экспорта текущего представления
2. **Сортировка колонок** - по клику на заголовок
3. **Настраиваемая пагинация** - выбор размера страницы (25/50/100)
4. **Авто-обновление** - таймер автоматического обновления каждые N секунд
5. **Форматирование дат** - отображение в формате DD.MM.YYYY HH:mm
6. **Point-in-time запросы** - DatePicker для выбора даты "на какую дату показать остатки"
7. **Подсветка поиска** - выделение найденного текста в результатах
8. **Клавиатурные сокращения**:
   - Ctrl+F - фокус на первом поле фильтра
   - F5 - обновить текущую страницу
   - Ctrl+E - экспорт
9. **Печать отчета** - форматированный отчет по остаткам
10. **Группировка по SKU** - сворачиваемые группы по товарам
11. **Визуальные индикаторы**:
    - Цветовая кодировка по статусам
    - Предупреждения о скором истечении срока годности
    - Индикация пустых паллет
12. **Расширенные фильтры**:
    - Диапазон дат получения
    - Диапазон дат истечения срока
    - Поставщик
    - Диапазон количества

## Файлы, затронутые в рамках работы

### Созданные файлы
1. `desktop-client/src/main/java/com/wmsdipl/desktop/model/StockItem.java` ✅
2. `desktop-client/src/main/java/com/wmsdipl/desktop/model/StockMovement.java` ✅

### Модифицированные файлы
3. `desktop-client/src/main/java/com/wmsdipl/desktop/ApiClient.java` ✅
   - Добавлены импорты (строки ~8-9)
   - Добавлены 4 метода API (строки ~534-630)
   - Добавлен внутренний класс StockPage

4. `desktop-client/src/main/java/com/wmsdipl/desktop/DesktopClientApplication.java` ✅
   - Добавлены импорты (строки ~3-12)
   - Добавлена кнопка навигации "Остатки" (строка ~110, ~126)
   - Добавлен метод showStockPane() (~250 строк, ~525)
   - Добавлен метод showMovementHistoryDialog() (~100 строк, ~775)

### Существующие файлы (backend, созданы ранее)
5. `core-api/src/test/java/com/wmsdipl/core/web/StockControllerTest.java` ✅

## Проверка работоспособности

### Статус компиляции ✅
```bash
gradle :desktop-client:compileJava
```
**Результат**: BUILD SUCCESSFUL

**Предупреждение**: 
```
Note: uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
```
Это предупреждение связано с Generic types и не влияет на функциональность.

### Статус тестов backend ✅
```bash
gradle :core-api:test --tests "*StockControllerTest"
```
**Результат**: 10 тестов пройдено успешно

### Общий статус тестов ✅
```bash
gradle test
```
**Результат**: 296 тестов пройдено (включая все модули)

## Контрольный список для тестировщика

- [ ] Desktop Client успешно запускается
- [ ] Вход в систему проходит успешно
- [ ] Кнопка "Остатки" отображается в навигации
- [ ] Панель фильтров отображается корректно
- [ ] Таблица с 11 колонками отображается
- [ ] Кнопка "Поиск" загружает данные
- [ ] Кнопка "Очистить" сбрасывает фильтры
- [ ] Enter в поле фильтра запускает поиск
- [ ] Фильтр по коду SKU работает
- [ ] Фильтр по коду ячейки работает
- [ ] Фильтр по баркоду паллеты работает
- [ ] Фильтр по ID прихода работает
- [ ] Фильтр по статусу работает
- [ ] Комбинированные фильтры работают
- [ ] Пагинация отображается корректно
- [ ] Кнопка "След ▶" переходит на следующую страницу
- [ ] Кнопка "◀ Пред" переходит на предыдущую страницу
- [ ] Индикатор "Страница: X / Y" обновляется
- [ ] Индикатор "Всего: N" показывает правильное количество
- [ ] Двойной клик по строке открывает диалог истории
- [ ] Диалог истории отображает корректный заголовок
- [ ] Таблица истории заполняется данными
- [ ] Таблица истории показывает все типы перемещений
- [ ] Кнопка "Закрыть" закрывает диалог истории
- [ ] Обработка ошибок работает корректно (Alert диалоги)
- [ ] Темная тема применяется ко всем элементам
- [ ] Нет визуальных артефактов или неправильного отображения

## Контакты и поддержка

При обнаружении проблем или багов:
1. Проверьте логи core-api (`logs/application.log`)
2. Проверьте консоль desktop-client на наличие Java exceptions
3. Убедитесь, что PostgreSQL база данных запущена
4. Убедитесь, что core-api сервер запущен и доступен
5. Проверьте наличие тестовых данных через Swagger UI

## Заключение

Функционал просмотра остатков полностью реализован и готов к тестированию. Все файлы успешно скомпилированы, backend тесты проходят. Следующий этап - runtime тестирование пользовательского интерфейса с реальными данными.

**Дата завершения работ**: 11 января 2026  
**Статус**: ✅ Готово к тестированию  
**Затраченное время**: 1 рабочий день  
**Строк кода добавлено**: ~600+ строк (модели + API client + UI)
