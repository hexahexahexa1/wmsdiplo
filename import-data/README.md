# –¢–µ—Å—Ç–æ–≤—ã–µ XML –¥–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –ø—Ä–∏—Ö–æ–¥–æ–≤

## –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–∞ –ø–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ XML –¥–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –ø—Ä–∏—Ö–æ–¥–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤ –≤ —Å–∏—Å—Ç–µ–º—É WMSDIPL —á–µ—Ä–µ–∑ `import-service`.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ XML –¥–æ–∫—É–º–µ–Ω—Ç–∞

### –ö–æ—Ä–Ω–µ–≤–æ–π —ç–ª–µ–º–µ–Ω—Ç `<receipt>`

```xml
<receipt messageId="—É–Ω–∏–∫–∞–ª—å–Ω—ã–π_–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä" 
         docNo="–Ω–æ–º–µ—Ä_–¥–æ–∫—É–º–µ–Ω—Ç–∞" 
         docDate="YYYY-MM-DD" 
         supplier="–Ω–∞–∑–≤–∞–Ω–∏–µ_–ø–æ—Å—Ç–∞–≤—â–∏–∫–∞">
    <!-- —Å—Ç—Ä–æ–∫–∏ –ø—Ä–∏—Ö–æ–¥–∞ -->
</receipt>
```

#### –ê—Ç—Ä–∏–±—É—Ç—ã –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞:

| –ê—Ç—Ä–∏–±—É—Ç | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|--------------|-----|----------|--------|
| `messageId` | ‚úÖ –î–∞ | String | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è SHA-256 —Ö—ç—à —Ñ–∞–π–ª–∞) | `MSG-2026-01-001` |
| `docNo` | ‚úÖ –î–∞ | String | –ù–æ–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞ –ø—Ä–∏—Ö–æ–¥–∞ | `RCP-2026-001` |
| `docDate` | ‚ùå –ù–µ—Ç | Date (ISO) | –î–∞—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD | `2026-01-12` |
| `supplier` | ‚ùå –ù–µ—Ç | String | –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ | `–û–û–û –¢–µ—Å—Ç–æ–≤—ã–π –ü–æ—Å—Ç–∞–≤—â–∏–∫` |

### –≠–ª–µ–º–µ–Ω—Ç `<line>` (—Å—Ç—Ä–æ–∫–∞ –ø—Ä–∏—Ö–æ–¥–∞)

```xml
<line lineNo="1" 
      sku="SKU-001" 
      name="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞" 
      uom="–µ–¥.–∏–∑–º" 
      qtyExpected="100" 
      packaging="—Ç–∏–ø —É–ø–∞–∫–æ–≤–∫–∏" 
      sscc="—à—Ç—Ä–∏—Ö–∫–æ–¥"/>
```

#### –ê—Ç—Ä–∏–±—É—Ç—ã —ç–ª–µ–º–µ–Ω—Ç–∞ line:

| –ê—Ç—Ä–∏–±—É—Ç | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|--------------|-----|----------|--------|
| `lineNo` | ‚ùå –ù–µ—Ç | Integer | –ù–æ–º–µ—Ä —Å—Ç—Ä–æ–∫–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ | `1`, `2`, `3` |
| `sku` | ‚ùå –ù–µ—Ç | String | –ê—Ä—Ç–∏–∫—É–ª —Ç–æ–≤–∞—Ä–∞ (SKU) | `SKU-001`, `MILK-001` |
| `name` | ‚ùå –ù–µ—Ç | String | –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ | `–ú–æ–ª–æ–∫–æ 3.2% 1–ª` |
| `uom` | ‚ùå –ù–µ—Ç | String | –ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è | `—à—Ç`, `–∫–≥`, `–ª`, `—É–ø–∞–∫` |
| `qtyExpected` | ‚ùå –ù–µ—Ç | BigDecimal | –û–∂–∏–¥–∞–µ–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ | `100`, `45.5`, `120.25` |
| `packaging` | ‚ùå –ù–µ—Ç | String | –¢–∏–ø —É–ø–∞–∫–æ–≤–∫–∏ | `–∫–æ—Ä–æ–±–∫–∞`, `—è—â–∏–∫`, `–ø–æ–¥–¥–æ–Ω` |
| `sscc` | ‚ùå –ù–µ—Ç | String | SSCC –∫–æ–¥ (Serial Shipping Container Code) - 18 —Ü–∏—Ñ—Ä | `00012345678901234567` |

## –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã

### 1. `receipt-simple.xml` - –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ë–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç –∏–º–ø–æ—Ä—Ç–∞
- **–î–æ–∫—É–º–µ–Ω—Ç**: RCP-2026-001
- **–ü–æ–∑–∏—Ü–∏–π**: 3
- **–¢–æ–≤–∞—Ä—ã**: –ú–æ–ª–æ–∫–æ, –•–ª–µ–±, –ú–∞—Å–ª–æ
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã

### 2. `receipt-large.xml` - –ë–æ–ª—å—à–æ–π –∑–∞–∫–∞–∑
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —Ä–∞–±–æ—Ç—ã —Å –±–æ–ª—å—à–∏–º–∏ –æ–±—ä–µ–º–∞–º–∏
- **–î–æ–∫—É–º–µ–Ω—Ç**: RCP-2026-002
- **–ü–æ–∑–∏—Ü–∏–π**: 12
- **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏**: –ú–æ–ª–æ—á–Ω–∞—è –ø—Ä–æ–¥—É–∫—Ü–∏—è, –•–ª–µ–±–æ–±—É–ª–æ—á–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è, –ú–∞—Å–ª–∞, –ö–æ–Ω—Å–µ—Ä–≤—ã, –ù–∞–ø–∏—Ç–∫–∏
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: –†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ç–æ–≤–∞—Ä–æ–≤

### 3. `receipt-minimal.xml` - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º –ø–æ–ª–µ–π
- **–î–æ–∫—É–º–µ–Ω—Ç**: RCP-MIN-001
- **–ü–æ–∑–∏—Ü–∏–π**: 2
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è (supplier, packaging, sscc)

### 4. `receipt-weighted.xml` - –í–µ—Å–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢–µ—Å—Ç —Ä–∞–±–æ—Ç—ã —Å –¥—Ä–æ–±–Ω—ã–º–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞–º–∏
- **–î–æ–∫—É–º–µ–Ω—Ç**: RCP-2026-004
- **–ü–æ–∑–∏—Ü–∏–π**: 5
- **–¢–æ–≤–∞—Ä—ã**: –°—ã—Ä, –ö–æ–ª–±–∞—Å–∞, –§—Ä—É–∫—Ç—ã (–≤–µ—Å–æ–≤—ã–µ)
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: –î—Ä–æ–±–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è qtyExpected (45.5, 30.75, 120.25)

### 5. `receipt-pharma.xml` - –§–∞—Ä–º–∞—Ü–µ–≤—Ç–∏–∫–∞
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢–µ—Å—Ç –¥–ª—è FEFO —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (–∏—Å—Ç–µ–∫–∞—é—â–∏–µ —Å—Ä–æ–∫–∏)
- **–î–æ–∫—É–º–µ–Ω—Ç**: RCP-PHARMA-001
- **–ü–æ–∑–∏—Ü–∏–π**: 5
- **–¢–æ–≤–∞—Ä—ã**: –õ–µ–∫–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–µ–ø–∞—Ä–∞—Ç—ã –∏ –ë–ê–î—ã
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**: –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è FEFO —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç (—á–µ—Ä–µ–∑ import-service)

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –∏–º–ø–æ—Ä—Ç–∞** –≤ desktop-client:
   - –û—Ç–∫—Ä–æ–π—Ç–µ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏"
   - –£–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å: `E:\WMSDIPL\import-data\incoming`
   - –ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –∏–º–ø–æ—Ä—Ç–∞"

2. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª** –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é incoming:
```bash
cp import-data/examples/receipt-simple.xml import-data/incoming/
```

3. **–î–æ–∂–¥–∏—Ç–µ—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏**:
   - import-service –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–∞–ø–∫—É –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
   - –ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –≤ –ø–æ–¥–ø–∞–ø–∫—É `processed/` –∏–ª–∏ `failed/`

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
   - –û—Ç–∫—Ä–æ–π—Ç–µ "–ü—Ä–∏—Ö–æ–¥—ã" –≤ desktop-client
   - –ù–∞–π–¥–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç –ø–æ –Ω–æ–º–µ—Ä—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, RCP-2026-001)
   - –°—Ç–∞—Ç—É—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å DRAFT

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ API

```bash
# –û—Ç–ø—Ä–∞–≤–∫–∞ ImportPayload —á–µ—Ä–µ–∑ REST API
curl -X POST http://localhost:8080/api/imports \
  -H "Content-Type: application/json" \
  -u admin:admin \
  -d @payload.json
```

–ì–¥–µ `payload.json` —Å–æ–¥–µ—Ä–∂–∏—Ç JSON –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ ImportPayload:
```json
{
  "messageId": "MSG-2026-01-001",
  "docNo": "RCP-2026-001",
  "docDate": "2026-01-12",
  "supplier": "–û–û–û –¢–µ—Å—Ç–æ–≤—ã–π –ü–æ—Å—Ç–∞–≤—â–∏–∫",
  "lines": [
    {
      "lineNo": 1,
      "sku": "SKU-001",
      "name": "–ú–æ–ª–æ–∫–æ 3.2% 1–ª",
      "uom": "—à—Ç",
      "qtyExpected": 100,
      "packaging": "–∫–æ—Ä–æ–±–∫–∞",
      "sscc": "00012345678901234567"
    }
  ]
}
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ desktop-client

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ desktop-client: `gradle :desktop-client:run`
2. –í–æ–π–¥–∏—Ç–µ: admin / admin
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏"
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—É—Ç—å –∏–º–ø–æ—Ä—Ç–∞: `E:\WMSDIPL\import-data\incoming`
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ª—é–±–æ–π —Ñ–∞–π–ª –∏–∑ `examples/` –≤ `incoming/`

## Workflow –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–∏—Ö–æ–¥–∞

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ –ø—Ä–∏—Ö–æ–¥–∞:

1. **DRAFT** - –ø—Ä–∏—Ö–æ–¥ —Å–æ–∑–¥–∞–Ω, –º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
2. **CONFIRMED** - –ø—Ä–∏—Ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω, —Å–æ–∑–¥–∞—é—Ç—Å—è –∑–∞–¥–∞—á–∏ –ø—Ä–∏—ë–º–∫–∏
3. **RECEIVING** - –∏–¥—ë—Ç –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–∏—ë–º–∫–∏ (—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)
4. **ACCEPTED** - –ø—Ä–∏—ë–º–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
5. **PLACEMENT** - —Å–æ–∑–¥–∞—é—Ç—Å—è –∑–∞–¥–∞—á–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è (putaway)

## –í–∞–ª–∏–¥–∞—Ü–∏—è XML

–ü–∞—Ä—Å–µ—Ä XML (`XmlParser.java`) –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:

- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç XXE (XML External Entity) –∞—Ç–∞–∫
- ‚úÖ –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π (messageId, docNo)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è messageId –∏–∑ SHA-256 —Ö—ç—à–∞ —Ñ–∞–π–ª–∞ (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω)
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ ISO (YYYY-MM-DD)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥—Ä–æ–±–Ω—ã—Ö —á–∏—Å–µ–ª –¥–ª—è qtyExpected

## –ü—Ä–∏–º–µ—Ä—ã –æ—à–∏–±–æ–∫

### –û—à–∏–±–∫–∞: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ messageId
```
ERROR: duplicate key value violates unique constraint "receipts_message_id_key"
```
**–†–µ—à–µ–Ω–∏–µ**: –ò–∑–º–µ–Ω–∏—Ç–µ –∞—Ç—Ä–∏–±—É—Ç `messageId` –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.

### –û—à–∏–±–∫–∞: –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã
```
ERROR: Could not parse docDate
```
**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç YYYY-MM-DD, –Ω–∞–ø—Ä–∏–º–µ—Ä: `2026-01-12`

### –û—à–∏–±–∫–∞: –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ
```
ERROR: docNo is required
```
**–†–µ—à–µ–Ω–∏–µ**: –£–∫–∞–∂–∏—Ç–µ –∞—Ç—Ä–∏–±—É—Ç `docNo` –≤ –∫–æ—Ä–Ω–µ–≤–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ `<receipt>`

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –∏–º–ø–æ—Ä—Ç–∞

```
import-data/
‚îú‚îÄ‚îÄ incoming/          # –°—é–¥–∞ –ø–æ–º–µ—â–∞—é—Ç—Å—è XML —Ñ–∞–π–ª—ã –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞
‚îú‚îÄ‚îÄ processed/         # –£—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îú‚îÄ‚îÄ failed/            # –§–∞–π–ª—ã —Å –æ—à–∏–±–∫–∞–º–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îî‚îÄ‚îÄ examples/          # –ü—Ä–∏–º–µ—Ä—ã XML –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
    ‚îú‚îÄ‚îÄ receipt-simple.xml
    ‚îú‚îÄ‚îÄ receipt-large.xml
    ‚îú‚îÄ‚îÄ receipt-minimal.xml
    ‚îú‚îÄ‚îÄ receipt-weighted.xml
    ‚îî‚îÄ‚îÄ receipt-pharma.xml
```

## –õ–æ–≥–∏ –∏–º–ø–æ—Ä—Ç–∞

–õ–æ–≥–∏ import-service —Å–æ–¥–µ—Ä–∂–∞—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ—Ü–µ—Å—Å–µ –∏–º–ø–æ—Ä—Ç–∞:

```
INFO  XmlParser - Parsed XML docNo=RCP-2026-001 lines=3
INFO  ImportHandler - Successfully imported docNo=RCP-2026-001 messageId=MSG-2026-01-001
```

–ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö:
```
ERROR ImportHandler - Failed to import file: receipt-error.xml
ERROR ImportHandler - Reason: Invalid XML format
```

## –°–æ–≤–µ—Ç—ã –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤

1. **–ö–æ–ø–∏—Ä—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–∏–º–µ—Ä—ã** –∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ –∏—Ö
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ messageId** –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
3. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã**: —Ç–æ–ª—å–∫–æ YYYY-MM-DD
4. **SSCC –∫–æ–¥—ã** –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å 18-–∑–Ω–∞—á–Ω—ã–º–∏ (–º–æ–∂–Ω–æ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å)
5. **–î—Ä–æ–±–Ω—ã–µ —á–∏—Å–ª–∞** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ—á–∫—É, –∞ –Ω–µ –∑–∞–ø—è—Ç—É—é: `45.5` ‚úÖ, `45,5` ‚ùå
6. **–ö–æ–¥–∏—Ä–æ–≤–∫–∞ —Ñ–∞–π–ª–∞**: UTF-8
7. **–ü–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫**: –ª—é–±–æ–π (LF –∏–ª–∏ CRLF)

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ XML
cat import-data/examples/receipt-simple.xml

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞
cp import-data/examples/receipt-simple.xml import-data/incoming/

# –û—á–∏—Å—Ç–∫–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ incoming
rm -f import-data/incoming/*.xml

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ import-service
gradle :import-service:bootRun

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
ls -lh import-data/processed/
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å desktop-client

Desktop-client –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- üìÅ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –∏–º–ø–æ—Ä—Ç–∞
- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã
- ‚úÖ –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—ã
- üìä –í–∏–¥–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–º–ø–æ—Ä—Ç–∞

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API**: http://localhost:8080/swagger-ui.html
- **Endpoint –∏–º–ø–æ—Ä—Ç–∞**: POST http://localhost:8080/api/imports
- **–ü–æ—Ä—Ç import-service**: 8090
- **–§–æ—Ä–º–∞—Ç timestamp**: ISO 8601 (YYYY-MM-DDTHH:mm:ss)

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º —Å –∏–º–ø–æ—Ä—Ç–æ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ import-service
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ XML —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ö–µ–º–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ incoming
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ core-api –∏ import-service –∑–∞–ø—É—â–µ–Ω—ã
